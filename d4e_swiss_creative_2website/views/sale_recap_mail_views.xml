<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="sale_recap_mail_view_tree" model="ir.ui.view">
            <field name="name">sale.recap.mail.view.tree</field>
            <field name="model">sale.recap.mail</field>
            <field name="arch" type="xml">
                <tree string="Sale Recap Mails" create="0">
                    <field name="supplier_id"/>
                    <field name="month_year"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="sale_recap_mail_action" model="ir.actions.act_window">
            <field name="name">Sale Recap Mailing</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.recap.mail</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="sale_recap_mail_view_tree"/>
        </record>

        <menuitem id="menu_sale_recap_mail" action="sale_recap_mail_action" parent="sale.sale_order_menu" sequence="11"/>



        <record model="ir.actions.server" id="action_sale_recap_mail_mass_mailing">
            <field name="name">Send Mails</field>
            <field name="model_id" ref="d4e_swiss_creative_2website.model_sale_recap_mail"/>
            <field name="binding_model_id" ref="d4e_swiss_creative_2website.model_sale_recap_mail" />
            <field name="state">code</field>
            <field name="code">
                if records:
                    records.send_mails()
            </field>
        </record>


    </data>
</odoo>
